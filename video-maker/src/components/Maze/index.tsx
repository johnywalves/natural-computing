import { Fragment } from "react/jsx-runtime";
import getCube from "../../utils/getCube";
import Block from "./components/Block";
import Line from "./components/Line";
import BorderHorizontal from "./components/BorderHorizontal";
import { LINE_BLOCK_HEIGHT, LINE_BORDER_HEIGHT } from "../../constants/sizes";
import Dot from "./components/Dot";
import { MalleableProps } from "../../types/MalleableProps";
import BorderVertical from "./components/BorderVertical";

const NEUTRAL_MODEL = 15 as MalleableProps["model"];

const Maze = () => {
  const data = getCube<number>([
    0x0e, 0x0a, 0x09, 0x0c, 0x0a, 0x0a, 0x0a, 0x0a, 0x0a, 0x0a, 0x08, 0x0a,
    0x0a, 0x0a, 0x08, 0x09, 0x0c, 0x09, 0x05, 0x06, 0x08, 0x0a, 0x0a, 0x0a,
    0x0a, 0x0b, 0x06, 0x0a, 0x0a, 0x0a, 0x03, 0x05, 0x05, 0x05, 0x05, 0x0c,
    0x02, 0x0b, 0x0e, 0x08, 0x0a, 0x0a, 0x08, 0x0a, 0x08, 0x08, 0x09, 0x05,
    0x05, 0x04, 0x01, 0x06, 0x08, 0x0a, 0x09, 0x04, 0x0a, 0x0a, 0x00, 0x0a,
    0x03, 0x05, 0x05, 0x05, 0x05, 0x05, 0x04, 0x09, 0x06, 0x09, 0x05, 0x04,
    0x0a, 0x0a, 0x02, 0x0a, 0x0b, 0x05, 0x05, 0x05, 0x05, 0x04, 0x03, 0x06,
    0x0a, 0x02, 0x03, 0x06, 0x0a, 0x0a, 0x0a, 0x0a, 0x09, 0x05, 0x05, 0x05,
    0x05, 0x05, 0x0d, 0x0d, 0x0d, 0x0c, 0x08, 0x0a, 0x0a, 0x0a, 0x0a, 0x09,
    0x05, 0x05, 0x05, 0x05, 0x06, 0x03, 0x04, 0x01, 0x04, 0x01, 0x05, 0x0c,
    0x09, 0x0c, 0x08, 0x01, 0x05, 0x05, 0x05, 0x05, 0x0c, 0x08, 0x01, 0x06,
    0x01, 0x05, 0x04, 0x02, 0x03, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05,
    0x05, 0x05, 0x05, 0x0d, 0x06, 0x01, 0x05, 0x0c, 0x0a, 0x01, 0x05, 0x05,
    0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x05, 0x04, 0x09, 0x06, 0x03, 0x06,
    0x0a, 0x02, 0x00, 0x03, 0x05, 0x04, 0x03, 0x05, 0x05, 0x04, 0x03, 0x05,
    0x05, 0x0c, 0x0a, 0x0a, 0x08, 0x09, 0x04, 0x0a, 0x01, 0x05, 0x0d, 0x05,
    0x05, 0x05, 0x0d, 0x05, 0x05, 0x04, 0x0a, 0x08, 0x03, 0x05, 0x06, 0x0a,
    0x03, 0x05, 0x04, 0x01, 0x05, 0x05, 0x04, 0x01, 0x04, 0x03, 0x0c, 0x02,
    0x0b, 0x06, 0x08, 0x0a, 0x0a, 0x03, 0x05, 0x05, 0x05, 0x06, 0x01, 0x07,
    0x06, 0x08, 0x02, 0x0a, 0x0a, 0x0b, 0x06, 0x08, 0x0a, 0x0a, 0x00, 0x01,
    0x06, 0x0a, 0x02, 0x0a, 0x0a, 0x02, 0x0b, 0x0e, 0x0a, 0x0a, 0x0a, 0x02,
    0x0a, 0x0a, 0x03, 0x07,
  ]);

  return (
    <div className="h-full aspect-square bg-amber-100">
      <Line height={LINE_BORDER_HEIGHT}>
        <Dot model={NEUTRAL_MODEL} />

        {Array.from({ length: 16 }).map((_, index) => (
          <Fragment key={index}>
            <BorderHorizontal key={index} model={NEUTRAL_MODEL} />
            <Dot model={NEUTRAL_MODEL} />
          </Fragment>
        ))}
      </Line>

      {data.map((line, index) => (
        <Fragment key={`line-${index + 1}`}>
          <Line height={LINE_BLOCK_HEIGHT}>
            <BorderVertical model={NEUTRAL_MODEL} />

            {line.map((item, index) => (
              <Fragment key={index}>
                <Block />
                <BorderVertical model={item as MalleableProps["model"]} />
              </Fragment>
            ))}
          </Line>

          <Line height={LINE_BORDER_HEIGHT}>
            <Dot model={NEUTRAL_MODEL} />

            {line.map((item, index) => (
              <Fragment key={index}>
                <BorderHorizontal
                  key={index}
                  model={item as MalleableProps["model"]}
                />
                <Dot model={item as MalleableProps["model"]} />
              </Fragment>
            ))}
          </Line>
        </Fragment>
      ))}
    </div>
  );
};

export default Maze;
